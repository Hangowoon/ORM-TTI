<!-- Top -->
<!-- Navigation-->
<nav class="navbar navbar-expand-lg navbar-light fixed-top py-3" id="mainNav">
	<div class="container px-4 px-lg-5">
		<a class="navbar-brand" href="/main">TTI</a>

		<button
			class="navbar-toggler navbar-toggler-right"
			type="button"
			data-bs-toggle="collapse"
			data-bs-target="#navbarResponsive"
			aria-controls="navbarResponsive"
			aria-expanded="false"
			aria-label="Toggle navigation"
		>
			<span class="navbar-toggler-icon"></span>
		</button>

		<div class="collapse navbar-collapse" id="navbarResponsive">
			<ul class="navbar-nav ms-auto my-2 my-lg-0">
				<li class="nav-item">
					<a class="nav-link" href="/create">Create</a>
				</li>
				<li class="nav-item">
					<a class="nav-link" href="/gallery">Gallery</a>
				</li>
				<li class="nav-item">
					<a class="nav-link" href="/my">My Page</a>
				</li>
				<li class="nav-item">
					<a class="nav-link" href="/logout">Log Out</a>
				</li>
			</ul>
		</div>
	</div>
</nav>

<!-- center -->
<!-- Masthead-->
<header class="masthead">
	<div class="container h-50">
		<div class="row gx-4 gx-lg-5 h-100 align-items-center justify-content-center text-center">
			<!-- 설명란 -->
			<div class="col-lg-12 align-self-end mt-3 px-4">
				<h2 class="text-white font-weight-bold">이미지를 생성해 보세요.</h2>
				<p class="text-white-75 mb-3">텍스트 설명을 통해 독창적이고 사실적인 이미지와 예술 작품을 만들어 보세요.</p>
			</div>

			<!-- 입력란 -->
			<div class="px-lg-10">
				<form method="post" action="/create">
					<!-- 프롬프트-->
					<div class="row mb-2 container-lg">
						<div class="col-lg-12">
							<input type="text" class="form-control rounded-3" id="floatingPrompt" name="floatingPrompt" placeholder="Enter Text" />
						</div>
					</div>

					<!-- 선택 버튼  -->
					<div class="row mb-2 container-lg">
						<!-- 선택  -->
						<div class="col-lg-8">
							<div class="row">
								<!-- AI 모델 종류 -->
								<div class="col-6">
									<select name="modelVersion" id="modelVersion" class="form-select rounded-3">
										<option value="" selected>AI 모델</option>
										<option value="dall-e-2">DALL-E-2</option>
										<option value="dall-e-3">DALL-E-3</option>
									</select>
								</div>
								<!-- 이미지 크기 -->
								<div class="col-6">
									<select name="imageSize" id="imageSize" class="form-select rounded-3">
										<option value="" selected>이미지 크기</option>
										<option value="512x512">512X512</option>
										<option value="1024x1024">1024X1024</option>
									</select>
								</div>
							</div>
						</div>

						<!-- 버튼 -->
						<div class="col-lg-4">
							<div class="row">
								<!-- 생성 버튼 -->
								<div class="col-6">
									<button class="btn rounded-3 btn-dark" type="submit">Generate</button>
								</div>
								<!-- 저장 버튼 -->
								<div class="col-6">
									<button class="btn rounded-3 btn-dark" type="submit">Save</button>
								</div>
							</div>
						</div>
					</div>
				</form>
			</div>

			<!-- 이미지 출력란-->
			<div class="col-lg-12 mb-502">
				<% if (imageBinaryData !== "") { %> BinaryData: <%= imageBinaryData %><br />
				<% } %>
				<img class="img-fluid" src="<%=imageURL%>" alt="..." />
			</div>
		</div>
	</div>
</header>

<title><%=title %></title>

<script>
	document.getElementById("modelVersion").addEventListener("change", function () {
		const model = this.value; // 현재 선택된 모델의 값을 가져옵니다.
		const imageSizeOptions = document.getElementById("imageSize").options; // 이미지 크기 드롭다운의 모든 옵션을 가져옵니다.

		// 모든 옵션을 초기화하여 활성화
		for (let option of imageSizeOptions) {
			option.disabled = false;
		}

		// 'DALL-E-3'가 선택된 경우, '512x512' 옵션을 비활성화
		if (model === "dall-e-3") {
			for (let option of imageSizeOptions) {
				if (option.value === "512x512") {
					option.disabled = true;
					break; // 해당 옵션을 찾으면 더 이상의 반복은 필요 없으므로 반복문 종료
				}
			}
		}
	});
</script>
